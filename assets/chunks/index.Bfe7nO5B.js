import{d as _,p as f,h as d,q as g,c as v,o as m,F as z,B as E,n as K,P as c}from"./framework.ba8B019S.js";const S=["value","type","inputmode","pattern","disabled","onInput","onKeydown","onCompositionend","onFocus"];var Z=_({__name:"PinInput",props:{length:{type:Number,required:!1,default:4},type:{type:String,required:!1,default:"text"},disabled:{type:Boolean,required:!1,default:!1},modelValue:{type:String,required:!1,default:""}},emits:["update:modelValue","complete"],setup(r,{emit:b}){const u=r,h=b,s=f(Array(u.length).fill("")),o=f([]),p=f(!1),k=d(()=>u.type==="number"?"tel":u.type),C=d(()=>u.type==="number"?"numeric":"text"),I=d(()=>u.type==="number"?"[0-9]*":"[a-zA-Z0-9]*");function A(e){return e&&(u.type==="number"?/^\d$/:/^[a-zA-Z0-9]$/).test(e)?e.slice(-1):""}g(()=>u.modelValue,e=>{if(e){const t=e.split("");s.value=Array(u.length).fill("").map((n,l)=>t[l]||"")}},{immediate:!0}),g(()=>s.value.join(""),e=>{e.length===u.length&&(h("update:modelValue",e),h("complete",e))});function y(e,t){if(p.value)return;const n=A(e.target.value);s.value[t]=n,c(()=>{var a;const l=o.value[t];l.value=n,n&&t<u.length-1&&((a=o.value[t+1])==null||a.focus())})}function D(){p.value=!0}function w(e,t){p.value=!1,y(e,t)}function q(e,t){var n,l,a;switch(e.key){case"Backspace":e.preventDefault(),s.value[t]?s.value[t]="":t>0&&(s.value[t-1]="",(n=o.value[t-1])==null||n.focus());break;case"ArrowLeft":e.preventDefault(),(l=o.value[t-1])==null||l.focus();break;case"ArrowRight":e.preventDefault(),(a=o.value[t+1])==null||a.focus();break}}function B(e){var l;e.preventDefault(),[...((l=e.clipboardData)==null?void 0:l.getData("text"))??""].filter(a=>u.type==="number"?/\d/.test(a):/[a-zA-Z0-9]/.test(a)).slice(0,u.length).forEach((a,i)=>{s.value[i]=a}),c(()=>{var i;const a=s.value.findIndex(P=>!P);a!==-1&&((i=o.value[a])==null||i.focus())})}function F(e){if(u.disabled)return;const t=s.value.findIndex(n=>!n);if(t!==-1&&e>t){c(()=>{const n=o.value[t];n==null||n.focus(),n==null||n.select()});return}c(()=>{var n;return(n=o.value[e])==null?void 0:n.select()})}return(e,t)=>(m(),v("div",{class:K(["h-pin-input",{"is-disabled":r.disabled}])},[(m(!0),v(z,null,E(r.length,(n,l)=>(m(),v("input",{key:l,ref_for:!0,ref:a=>o.value[l]=a,value:s.value[l],class:"h-pin-input__field",type:k.value,inputmode:C.value,pattern:I.value,disabled:r.disabled,maxlength:1,onInput:a=>y(a,l),onKeydown:a=>q(a,l),onCompositionstart:D,onCompositionend:a=>w(a,l),onPaste:B,onFocus:a=>F(l)},null,40,S))),128))],2))}});export{Z as s};
