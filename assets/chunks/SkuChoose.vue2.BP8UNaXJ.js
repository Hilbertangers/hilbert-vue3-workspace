import{d as g,p as S,h as m,c as h,o as p,F as v,B as x,j as _,t as A,n as q}from"./framework.ba8B019S.js";var L=Object.defineProperty,j=(n,e,t)=>e in n?L(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,d=(n,e,t)=>j(n,typeof e!="symbol"?e+"":e,t);class E{constructor(e){d(this,"vertex"),d(this,"quantity"),d(this,"adjoinArray"),this.vertex=e,this.quantity=this.vertex.length,this.adjoinArray=[],this.init()}init(){this.adjoinArray=Array(this.quantity*this.quantity).fill(0)}setAdjoinVertexs(e,t,s){const i=this.vertex.indexOf(e);t.forEach(o=>{const r=this.vertex.indexOf(o),c=this.adjoinArray[i*this.quantity+r];typeof c!="number"?this.adjoinArray[i*this.quantity+r].push(s):c>1?this.adjoinArray[i*this.quantity+r]=[c,s]:this.adjoinArray[i*this.quantity+r]=s})}getVertexCol(e){const t=this.vertex.indexOf(e),s=[];return this.vertex.forEach((i,o)=>{s.push(this.adjoinArray[t+this.quantity*o])}),s}getCollection(e){const t=e.map(i=>this.getVertexCol(i));let s=[];return t.forEach((i,o)=>{i.some(r=>r!==0)&&s.push(e[o])}),s}getUnions(e){const t=e.map(i=>this.getVertexCol(i));let s=[];return this.vertex.forEach((i,o)=>{const r=t.map(c=>c[o]).filter(c=>c!==1);this.isItemEqual(r)&&s.push(i)}),s}isItemEqual(e){if(e.includes(0))return!1;let t=-1;return e.length&&(e.some(s=>(typeof s=="number"&&(t=s),typeof s=="number")),t===-1)?this.isArrayUnions(e):e.every(s=>typeof s=="number"?s===t:s.includes(t))}isArrayUnions(e){return e.length?e[0].some(t=>e.every(s=>s.includes(t))):!1}}var O=Object.defineProperty,V=(n,e,t)=>e in n?O(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,b=(n,e,t)=>V(n,typeof e!="symbol"?e+"":e,t);class B extends E{constructor(e,t){super(e.reduce((s,i)=>[...s,...i.list],[])),b(this,"specList"),b(this,"specCombinationList"),this.specList=e,this.specCombinationList=t,this.initSpec(),this.initSameLevel()}initSpec(){this.specCombinationList.forEach((e,t)=>{this.fillInSpec(e.specs,t+2)})}initSameLevel(){const e=this.getCollection(this.vertex);this.specList.forEach(t=>{const s=[];t.list.forEach(i=>{e.includes(i)&&s.push(i)}),this.fillInSpec(s,1)})}getSpecscOptions(e){let t=[];return e.some(Boolean)?t=this.getUnions(e.filter(Boolean)):t=this.getCollection(this.vertex),t}fillInSpec(e,t){e.forEach(s=>{this.setAdjoinVertexs(s,e,t)})}}const I={class:"sku-choose"},P={class:"sku-choose-title"},k={class:"sku-choose-spec"},F=["onClick"];var w=g({__name:"SkuChoose",props:{specList:{type:Array,required:!0,default:()=>[]},specCombinationList:{type:Array,required:!0,default:()=>[]}},setup(n){const e=n,t=S([]),s=m(()=>new B(e.specList,e.specCombinationList)),i=m(()=>s.value.getSpecscOptions(t.value));function o(a,f,l){t.value[l]!==f&&!a||(t.value[l]=t.value[l]===f?"":f,t.value=t.value.slice())}function r(a){return i.value.includes(a)}function c(a){return t.value.includes(a)}return(a,f)=>(p(),h("div",I,[(p(!0),h(v,null,x(n.specList,(l,y)=>(p(),h("div",{key:y},[_("p",P,A(l.title),1),_("div",k,[(p(!0),h(v,null,x(l.list,(u,C)=>(p(),h("span",{class:q({"sku-choose-spec-option":r(u),"sku-choose-spec-active":c(u),"sku-choose-spec-disabled":!r(u)}),key:C,onClick:()=>o(r(u),u,y)},A(u),11,F))),128))])]))),128))]))}});export{w as s};
